<section class="sd-pb-6">
  <lib-loading [loading]="loading$ | async" size="48px"></lib-loading>

  <section class="sd-pb-6" *ngIf="loaded$ | async" @contentBlockAnimation>
    <ng-container *ngIf="service$ | async as service">
      <div class="container">
        <div class="d-flex flex-row align-items-start">
          <lib-section-header [header]="service.name" class="mr-auto"></lib-section-header>
          <a
            *libServiceCheckAccess="permission.MANAGE; object: service"
            routerLink="admin/tickets"
            class="btn btn-danger"
            >Режим администратора</a
          >
        </div>
        <lib-responsible-user-list
          *ngIf="employeeLoaded$ | async"
          [responsibleUsers]="service.responsible_users"
          label="Ответственные за услугу"
        >
        </lib-responsible-user-list>
        <section class="sd-dlist-divider-b">
          <div class="mt-2">
            <lib-question-list
              *ngIf="service.questions.length; else noQuestions"
              [questions]="service.questions"
              [attachmentLoadingIds]="attachmentLoadingIds$ | async"
              [employeeLoaded]="employeeLoaded$ | async"
              (upRating)="upRating($event)"
              (downloadAttachment)="downloadAttachment($event)"
            ></lib-question-list>
          </div>
        </section>
      </div>
    </ng-container>
  </section>
</section>

<ng-template #noQuestions>
  <p class="search-title">Список вопросов пуст</p>
</ng-template>
