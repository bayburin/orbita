<lib-section-header header="Категории"></lib-section-header>

<ng-container *ngIf="loading$ | async as loading; else loaded">
  <lib-loading [loading]="loading" size="48px"></lib-loading>
</ng-container>

<ng-template #loaded>
  <ng-container *ngIf="loaded$ | async; else error">
    <p-toolbar styleClass="mb-3">
      <ng-template pTemplate="left">
        <button type="button" class="btn btn-outline-primary btn btn-sm" (click)="newForm()">Добавить</button>
      </ng-template>
      <ng-template pTemplate="right">
        <button type="button" class="btn btn-outline-primary btn btn-sm" (click)="loadData()">Обновить таблицу</button>
      </ng-template>
    </p-toolbar>

    <lib-admin-categories-table
      [categories]="categories$ | async"
      [loadingIds]="[]"
      (editForm)="editForm($event)"
      (remove)="remove($event)"
    ></lib-admin-categories-table>
  </ng-container>
</ng-template>

<ng-template #error>
  <p class="text-danger">Не удалось загрузить список категорий</p>
</ng-template>
