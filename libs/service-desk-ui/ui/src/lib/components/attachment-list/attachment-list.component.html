<div *ngIf="attachments.length > 3; else shortAttachmentList" ngbTooltip="Посмотреть список файлов">
  <div ngbDropdown container="body" autoClose="outside" placement="bottom-right">
    <i class="mdi mdi-file-download-outline mdi-24px pointer" ngbDropdownToggle></i>
    <div ngbDropdownMenu class="dropdown-admin-answer">
      <div
        *ngFor="let attachment of attachments; trackBy: trackByAttachment"
        class="d-flex dropdown-item align-items-center dropdown-item-content"
      >
        <div class="mr-auto text-truncate overflow-hidden">{{ attachment.filename }}</div>
        <div class="d-flex flex-row ml-4">
          <div
            class="pointer"
            *libLoadingIndicator="attachment.id; loadingIds: attachmentLoadingIds"
            [ngbTooltip]="'Скачать файл ' + attachment.filename"
            (click)="download.emit(attachment)"
          >
            <i class="mdi mdi-download mdi-24px"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #shortAttachmentList>
  <div class="row-flex-content">
    <div *ngFor="let attachment of attachments; trackBy: trackByAttachment">
      <ng-template #filename>{{ attachment.filename }}</ng-template>
      <div
        id="attachmentFile"
        *libLoadingIndicator="attachment.id; loadingIds: attachmentLoadingIds"
        [ngbTooltip]="filename"
        container="body"
      >
        <i class="mdi mdi-24px pointer" [libFileIcon]="attachment.filename" (click)="download.emit(attachment)"></i>
      </div>
    </div>
  </div>
</ng-template>
