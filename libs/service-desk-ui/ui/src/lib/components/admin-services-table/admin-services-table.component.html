<p-table
  #serviceTable
  [value]="services"
  styleClass="p-datatable-sm"
  responsiveLayout="scroll"
  dataKey="id"
  [paginator]="true"
  [rows]="10"
>
  <ng-template pTemplate="header">
    <tr>
      <th width="6%">#</th>
      <th width="25%">Категория</th>
      <th width="25%">Наименование</th>
      <th>Описание</th>
      <th>Тип</th>
      <th>Свободная заявка</th>
      <th>Ответственные</th>
      <th></th>
    </tr>
    <tr>
      <th>
        <p-columnFilter field="id" matchMode="equals" [showMenu]="false"></p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="category.id" matchMode="equals" [showMenu]="false">
          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
            <p-dropdown
              [ngModel]="value"
              [options]="categories"
              [showClear]="true"
              placeholder="Все"
              optionValue="id"
              optionLabel="name"
              (onChange)="filter($event.value)"
            >
            </p-dropdown>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="name" matchMode="contains" [showMenu]="false"></p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="short_description" matchMode="contains" [showMenu]="false"></p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="is_hidden" matchMode="equals" [showMenu]="false">
          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
            <p-dropdown
              [ngModel]="value"
              [options]="isHiddenValues"
              [showClear]="true"
              placeholder="Все"
              optionValue="is_hidden"
              (onChange)="filter($event.value)"
            >
              <ng-template let-item pTemplate="selectedItem">
                <lib-service-is-hidden-type [isHidden]="item.is_hidden"></lib-service-is-hidden-type>
              </ng-template>
              <ng-template let-option pTemplate="item">
                <lib-service-is-hidden-type [isHidden]="option.is_hidden"></lib-service-is-hidden-type>
              </ng-template>
            </p-dropdown>
          </ng-template>
        </p-columnFilter>
      </th>
      <th>
        <p-columnFilter field="has_common_case" matchMode="equals" [showMenu]="false">
          <ng-template pTemplate="filter" let-value let-filter="filterCallback">
            <p-dropdown
              [ngModel]="value"
              [options]="hasCommonCaseValues"
              [showClear]="true"
              placeholder="Все"
              optionValue="has_common_case"
              (onChange)="filter($event.value)"
            >
              <ng-template let-item pTemplate="selectedItem">
                <lib-service-has-common-case-type
                  [hasCommonCase]="item.has_common_case"
                ></lib-service-has-common-case-type>
              </ng-template>
              <ng-template let-option pTemplate="item">
                <lib-service-has-common-case-type
                  [hasCommonCase]="option.has_common_case"
                ></lib-service-has-common-case-type>
              </ng-template>
            </p-dropdown>
          </ng-template>
        </p-columnFilter>
      </th>
      <th></th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-rec let-index="rowIndex">
    <tr>
      <td>{{ rec.id }}</td>
      <td>{{ rec.category?.name }}</td>
      <td>{{ rec.name }}</td>
      <td>{{ rec.short_description }}</td>
      <td>
        <lib-service-is-hidden-type [isHidden]="rec.is_hidden"></lib-service-is-hidden-type>
      </td>
      <td>
        <lib-service-has-common-case-type [hasCommonCase]="rec.has_common_case"></lib-service-has-common-case-type>
      </td>
      <td>
        <lib-responsible-user-list [responsibleUsers]="rec.responsible_users"></lib-responsible-user-list>
      </td>
      <td class="text-center">
        <button
          pButton
          type="button"
          class="p-button-rounded p-button-text p-button-icon-only p-button-plain"
          [libDisableOnLoading]="rec.id"
          [libDisableOnLoadingIds]="loadingIds"
          (click)="editForm.emit(rec)"
        >
          <i class="mdi mdi-pencil mdi-18px" *libLoadingIndicator="rec.id; loadingIds: loadingIds"></i>
        </button>
        <button
          pButton
          type="button"
          class="p-button-rounded p-button-text p-button-icon-only p-button-plain"
          [libDisableOnLoading]="rec.id"
          [libDisableOnLoadingIds]="loadingIds"
          (click)="remove.emit(rec)"
        >
          <i class="mdi mdi-trash-can-outline mdi-18px" *libLoadingIndicator="rec.id; loadingIds: loadingIds"></i>
        </button>
      </td>
    </tr>
  </ng-template>
</p-table>
