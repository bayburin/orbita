<ng-template #noWorks>
  <p-divider type="dashed"></p-divider>
  <h4>Исполнители не назначены</h4>
</ng-template>

<ng-template #noActions>
  <p>Зафиксированных действий нет</p>
</ng-template>

<div *ngIf="works.length; else noWorks">
  <p-card class="history-overview-card p-shadow-2">
    <p-scrollPanel styleClass="history-overview-scroll-panel">
      <div class="history-overview-content">
        <div *ngFor="let work of works; trackBy: trackByWork" class="work-block">
          <h4 [ngClass]="work.group.description ? 'text-primary' : 'text-secondary'">
            {{ work.group.description || 'название группы отсутствует' }}
          </h4>
          <div *ngIf="work.histories.length; else noActions">
            <lib-history-event-card
              [history]="work.histories[work.histories.length - 1]"
              [num]="work.histories.length"
              [isLast]="work.histories[work.histories.length - 1].id == lastHistoryId"
            ></lib-history-event-card>
          </div>
          <div class="p-mb-5 p-mt-5">
            <p-divider></p-divider>
          </div>
          <div class="history-block">
            <div *ngFor="let history of work.histories; trackBy: trackByHistory; let index = index">
              <lib-history-event-card [history]="history" [num]="index + 1"></lib-history-event-card>
            </div>
          </div>
        </div>
      </div>
    </p-scrollPanel>
  </p-card>
</div>
