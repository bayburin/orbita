<div class="p-grid">
  <div class="p-col-4">
    <p-panel class="source-snapshot-panel" header="Данные на момент создания заявки">
      <h4>Данные по пользователю</h4>
      <lib-detail-row>
        <div attribute>ФИО</div>
        <div value>{{ sdRequest.source_snapshot?.fio }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Отдел</div>
        <div value>{{ sdRequest.source_snapshot?.dept }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Табельный номер</div>
        <div value>{{ sdRequest.source_snapshot?.tn }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Телефон</div>
        <div value>{{ sdRequest.source_snapshot?.user_attrs?.phone }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Логин ЛК</div>
        <div value>{{ sdRequest.source_snapshot?.domain_user }}</div>
      </lib-detail-row>

      <p-divider></p-divider>

      <h4>Данные по хосту</h4>
      <lib-detail-row>
        <div attribute>Имя</div>
        <div value>{{ sdRequest.source_snapshot?.dns }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>IP</div>
        <div value>{{ sdRequest.source_snapshot?.source_ip }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>MAC</div>
        <div value>{{ sdRequest.source_snapshot?.mac }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Инвентарный номер</div>
        <div value>{{ sdRequest.source_snapshot?.invent_num }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Штрих-код</div>
        <div value>{{ sdRequest.source_snapshot?.svt_item_id }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Расположение</div>
        <div value>{{ sdRequest.source_snapshot?.host_location }}</div>
      </lib-detail-row>

      <lib-detail-row>
        <div attribute>Версия ОС</div>
        <div value>{{ sdRequest.source_snapshot?.os }}</div>
      </lib-detail-row>
    </p-panel>
  </div>
  <div class="p-col-8">
    <div class="p-mb-3">
      <p-panel header="Последнее событие">
        <div *ngIf="sdRequest.lastHistory; else noHistory">
          <div class="p-d-flex p-ai-center">
            <span>
              <b>{{ sdRequest.lastHistory.user.fio }}</b>
            </span>
            <small class="p-ml-2">{{ sdRequest.lastHistory.created_at | datetime }}</small>
          </div>
          <div class="p-mt-2">{{ sdRequest.lastHistory.action }}</div>
        </div>
      </p-panel>
    </div>
    <p-panel header="Последний комментарий">
      <div *ngIf="sdRequest.comments.length; else noComments">
        <lib-comment [comment]="sdRequest.comments[sdRequest.comments.length - 1]"></lib-comment>
      </div>
    </p-panel>
  </div>
</div>

<ng-template #noComments>Комментарии отсутствуют</ng-template>
<ng-template #noHistory>События отсутствуют</ng-template>
