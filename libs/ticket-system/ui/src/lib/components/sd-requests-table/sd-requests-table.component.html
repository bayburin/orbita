<table cdk-table [dataSource]="sdRequests$" class="table" multiTemplateDataRows>
  <!-- Номер заявки -->
  <ng-container cdkColumnDef="id">
    <th cdk-header-cell *cdkHeaderCellDef>No.</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.id }}</td>
  </ng-container>

  <!-- Дата подачи -->
  <ng-container cdkColumnDef="createdAt">
    <th cdk-header-cell *cdkHeaderCellDef>Дата подачи</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.runtime.created_at | datetime }}</td>
  </ng-container>

  <!-- Срок выполнения -->
  <ng-container cdkColumnDef="finishedAtPlan">
    <th cdk-header-cell *cdkHeaderCellDef>Дедлайн</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.runtime.finished_at_plan | datetime }}</td>
  </ng-container>

  <!-- Статус -->
  <ng-container cdkColumnDef="status">
    <th cdk-header-cell *cdkHeaderCellDef>Статус</th>
    <td cdk-cell *cdkCellDef="let element">
      <span class="badge" [ngClass]="status(element.status).badge">{{ status(element.status).title }}</span>
    </td>
  </ng-container>

  <!-- Вид услуги -->
  <ng-container cdkColumnDef="serviceName">
    <th cdk-header-cell *cdkHeaderCellDef>Вид услуги</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.service_name }}</td>
  </ng-container>

  <!-- Вид заявки -->
  <ng-container cdkColumnDef="ticketName">
    <th cdk-header-cell *cdkHeaderCellDef>Вид заявки</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.ticket_name }}</td>
  </ng-container>

  <!-- Описание -->
  <ng-container cdkColumnDef="description">
    <th cdk-header-cell *cdkHeaderCellDef>Подробности</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.description }}</td>
  </ng-container>

  <!-- Приоритет -->
  <ng-container cdkColumnDef="priority">
    <th cdk-header-cell *cdkHeaderCellDef>Приоритет</th>
    <td cdk-cell *cdkCellDef="let element">{{ priority(element.priority).title }}</td>
  </ng-container>

  <!-- Дата закрытия -->
  <ng-container cdkColumnDef="finished_at">
    <th cdk-header-cell *cdkHeaderCellDef>Дата закрытия</th>
    <td cdk-cell *cdkCellDef="let element">{{ element.runtime.finished_at | datetime }}</td>
  </ng-container>

  <!-- Исполнители -->
  <ng-container cdkColumnDef="workers">
    <th cdk-header-cell *cdkHeaderCellDef>Исполнители</th>
    <td cdk-cell *cdkCellDef="let element"></td>
  </ng-container>

  <!-- Действия -->
  <ng-container cdkColumnDef="actions">
    <th cdk-header-cell *cdkHeaderCellDef></th>
    <td cdk-cell *cdkCellDef="let element">
      <i class="mdi mdi-chevron-double-down mdi-18px"></i>
    </td>
  </ng-container>

  <!-- Быстрый просмотр рабочего процесса заявки -->
  <ng-container cdkColumnDef="expandedEl">
    <td cdk-cell *cdkCellDef="let element" [attr.colspan]="displayedColumns.length">
      <lib-sd-request-history-overview [sdRequest]="element"></lib-sd-request-history-overview>
    </td>
  </ng-container>

  <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
  <tr cdk-row *cdkRowDef="let row; columns: displayedColumns;"></tr>
  <tr cdk-row *cdkRowDef="let row; columns: ['expandedEl']"></tr>
</table>
